<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Study Lane</title>
    <link rel="stylesheet" href="stylesheet/courses.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="wrapper">
      <%- include('userNavbar') %>
      <section class="section1">
        <% if (messages.success) { %>
        <div class="notification success" id="notification success">
          <p style="color: white; background-color: rgb(80, 161, 80)">
            <%= messages.success %>
          </p>
        </div>
        <% }else if (messages.error) { %>
        <div class="notification error" id="notification error">
          <p style="color: white; background-color: #ff2c2c">
            <%= messages.error %>
          </p>
        </div>
        <% } %>
        <div class="heading">
          <h1>Explore Our Courses</h1>
          <div class="search">
            <input
              class="input"
              type="text"
              placeholder="search for a course "
            />
            <i class="ri-search-line" id="searchBtn"></i>
            <i class="ri-close-line" id="closeBtn"></i>
          </div>
        </div>
      </section>
      <section class="courses">
        <% if (groupedCourses && Object.keys(groupedCourses).length > 0) { %> <%
        for (const [category, courses] of Object.entries(groupedCourses)) { %>
        <section class="courses">
          <h1 class="coursesHeading"><%= category %></h1>
          <i
            class="fa-sharp-duotone fa-solid fa-circle-chevron-left"
            id="leftArrow"
          ></i>
          <i
            class="fa-sharp-duotone fa-solid fa-circle-chevron-right"
            id="rightArrow"
          ></i>
          <div class="coursesAll container">
            <% courses.forEach((course) => { %>

            <div class="courseDetails">
              <div class="box">
                <div class="topBox"></div>
                <div class="bottombox">
                  <div class="headingLine"></div>
                  <div class="headingLine2 descriptionLine"></div>
                  <div class="headingLine3 descriptionLine"></div>
                  <div class="buttons"></div>
                </div>
              </div>
              <div class="courseImage">
                <img
                  class="coursePic"
                  src="<%= course.courseImage %>"
                  alt="<%= course.title %>"
                />
              </div>
              <div class="CourseTitle">
                <h4><%= course.title %></h4>
                <p class="description"><%= course.description %></p>
                <div class="duraauth">
                  <p class="learners">instructor: <%= course.createdBy %></p>
                  <p class="learners">Duration: <%= course.duration %></p>
                </div>
                <p class="learners">Uploaded: <%= course.createdAt %></p>
              </div>
              <div class="courseBtn">
                <form class="form" action="/course/enroll" method="post">
                  <input
                    type="hidden"
                    name="title"
                    value="<%= course.title %>"
                  />
                  <input
                    type="hidden"
                    name="userId"
                    value="<%= user.email %>"
                  />
                  <button type="submit" name="btnEnroll" class="BtnEnroll">
                    Enroll Now
                  </button>
                </form>
                <form class="form" action="/course/learning" method="post">
                  <input
                    type="hidden"
                    name="title"
                    value="<%= course.title %>"
                  />
                  <button type="submit" class="BtnView">courseDetails</button>
                </form>
              </div>
            </div>
            <% }) %>
          </div>
        </section>
        <% } %> <% } else { %>
        <p>No courses available.</p>
        <% } %>
      </section>
    </div>
    <script
      src="https://kit.fontawesome.com/c2025843a8.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="scripts/courses.js"></script>
  </body>
</html>
